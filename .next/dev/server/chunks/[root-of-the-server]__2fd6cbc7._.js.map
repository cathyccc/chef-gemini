{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///Users/cathychan/Desktop/react-portfolio/chef-gemini/app/api/generate-recipe/route.js"],"sourcesContent":["import { GoogleGenAI } from \"@google/genai\";\n\nconst ai = new GoogleGenAI({ apiKey: process.env.GEMINI_API_KEY});\n\nexport async function POST(req) {\n  const {ingredients} = await req.json();\n\n  console.log(ingredients)\n\n  if(!ingredients || ingredients.length < 4) {\n    return Response.json(\n      { error: \"You need to add more ingredients.\" },\n      {status: 400}\n    );\n  }\n\n  const ingredientsListString = ingredients.join(', ');\n  const PROMPT_NEW = `Create a recipe using these ingredients: ${ingredientsListString}.\n  IMPORTANT: Return ONLY the raw JSON object. Do not wrap it in markdown code blocks. Do not add any explanation or text before or after the JSON.\n  JSON structure:\n  {\n    \"recipeName\": \"Name of the dish\",\n    \"cookingTime\": \"Time in minutes\",\n    \"servings\": \"Number of servings\",\n    \"ingredients\": [\n      {\"name\": \"ingredient name\", \"quantity\": \"amount with unit\"}\n    ],\n    \"instructions\": [\n      \"Step 1 description\",\n      \"Step 2 description\"\n    ]\n  }`\n\n  try {\n    const response = await ai.models.generateContent({ \n      model: \"gemini-3-flash-preview\",\n      contents: [{\n        role: \"user\",\n        parts: [{text: PROMPT_NEW }] \n      }]\n    });\n\n    let text = response.text;\n    text = text.replace(/```json\\n?/g, '').replace(/```\\n?/g, '').trim();\n    const recipe = JSON.parse(text);\n    return Response.json(recipe, { status: 200 });\n\n  } catch (error) {\n    console.error(\"Gemini Error:\", error);\n    return Response.json(\n      { error: \"Failed to generate recipe. Please try again.\" },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,KAAK,IAAI,4KAAW,CAAC;IAAE,QAAQ,QAAQ,GAAG,CAAC,cAAc;AAAA;AAExD,eAAe,KAAK,GAAG;IAC5B,MAAM,EAAC,WAAW,EAAC,GAAG,MAAM,IAAI,IAAI;IAEpC,QAAQ,GAAG,CAAC;IAEZ,IAAG,CAAC,eAAe,YAAY,MAAM,GAAG,GAAG;QACzC,OAAO,SAAS,IAAI,CAClB;YAAE,OAAO;QAAoC,GAC7C;YAAC,QAAQ;QAAG;IAEhB;IAEA,MAAM,wBAAwB,YAAY,IAAI,CAAC;IAC/C,MAAM,aAAa,CAAC,yCAAyC,EAAE,sBAAsB;;;;;;;;;;;;;;GAcpF,CAAC;IAEF,IAAI;QACF,MAAM,WAAW,MAAM,GAAG,MAAM,CAAC,eAAe,CAAC;YAC/C,OAAO;YACP,UAAU;gBAAC;oBACT,MAAM;oBACN,OAAO;wBAAC;4BAAC,MAAM;wBAAW;qBAAE;gBAC9B;aAAE;QACJ;QAEA,IAAI,OAAO,SAAS,IAAI;QACxB,OAAO,KAAK,OAAO,CAAC,eAAe,IAAI,OAAO,CAAC,WAAW,IAAI,IAAI;QAClE,MAAM,SAAS,KAAK,KAAK,CAAC;QAC1B,OAAO,SAAS,IAAI,CAAC,QAAQ;YAAE,QAAQ;QAAI;IAE7C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,OAAO,SAAS,IAAI,CAClB;YAAE,OAAO;QAA+C,GACxD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}